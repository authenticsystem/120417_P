<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/iron-image/iron-image.html">
<link rel="import" href="shared-styles.html">
<link rel="import" href="my-icons.html">
<link rel="import" href="../bower_components/polymerfire/firebase-auth.html">
<link rel="import" href="../bower_components/polymerfire/firebase-query.html">
<link rel="import" href="../bower_components/paper-input/paper-input.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/paper-toast/paper-toast.html">

<dom-module id="my-account">
  <template>
    <style include="shared-styles">
      :host {
        display: block;

        padding: 10px;
      }

      .pad {
        padding: 0 16px;
        @apply --layout-flex;
        @apply --layout-vertical;
      }

      .primary {
        font-size: 18px;
        text-transform: capitalize;
      }

      .shortText,
      .longText {
        font-size: 12px;
      }

      app-header {
        color: rgb(255, 255, 255);
        background-color: #388E3C;
      }

      paper-icon-button.menu {
        margin-right: 16px;
      }

      iron-image {
        margin: 0 auto;
      }

      paper-button.green {
        background-color: var(--paper-green-500);
        color: white;
        margin-top: 3px;
      }

      paper-button.green[active] {
        background-color: var(--paper-red-500);
      }

      #uploader {
        -webkit-appearance: none;
        /* appearance: none; */
        width: 50%;
        margin-bottom: 10px;
      }

      a {
        text-decoration: none;
        background: yellow;
        padding: 2px;
        border-radius: 3px;
        font-weight: 500;
      }

      .action paper-button {
        height: 35px;
        font-size: 12px;
        font-weight: 400;
        width: 80px;
        text-align: center;
      }
    </style>

    <!-- <firebase-auth id="auth" status-known="{{statusKnown}}" user="{{user}}" provider="google" on-error="showError"></firebase-auth> -->


    <firebase-query id="query" path="/accountlist" data="{{account}}" order-by-child="uid" equal-to="{{user.uid}}">
    </firebase-query>

    <app-header-layout fullbleed has-scrolling-region>
      <app-header fixed slot="header">
        <app-toolbar primary>
          <!-- <paper-icon-button icon="my-icons:close" drawer-toggle on-tap="toggleDrawer"></paper-icon-button> -->
          <paper-icon-button class="menu" icon="my-icons:menu" drawer-toggle on-tap="toggleDrawer"></paper-icon-button>
          <div main-title>My Account</div>
        </app-toolbar>
      </app-header>

      <div class="card">
        <div class="profilePhoto">
          <iron-icon hidden$="{{user.photoURL}}" icon="my-icons:account-circle" style=" height:180px;width:180px; max-width:180px; border-radius: 50%; object-fit: cover; object-position: center"></iron-icon>
          <img hidden$="{{!user.photoURL}}" src="{{user.photoURL}}" style=" max-width:180px; border-radius: 50%; object-fit: cover; object-position: center"></img>
          <br>
          <progress value="0" max="100" id="uploader" style=" -webkit-appearance: none; width:180px; height:5px;">0%</progress>
          <br>
          <input type="file" id="fileButton" on-tap="_upload" accept="image/*"></input>
          <!-- <label for="file">Upload new picture</label> -->
          <!-- <input type="file" id="file" id="fileButton" on-tap="_upload" accept="image/*" style="display:none" /> -->
        </div>
        <br>
        <div class="info">
          <paper-input label="Firstname" value="{{firstname}}" id="fname"></paper-input>
          <paper-input label="Middlename" value="{{middlename}}" id="mname"></paper-input>
          <paper-input label="Lastname" value="{{lastname}}" id="lname"></paper-input>
          <paper-input label="Suffix" value="{{suffix}}" id="suffix"></paper-input>
          <!-- <paper-input label="Email address" value="{{user.email}}" id="email"></paper-input> -->
        </div>
        <div class="action">
          <!-- <paper-button style="width:180px">Change email/password</paper-button> -->
          <paper-button on-tap="_update" toggles raised class="custom green">Update</paper-button>
        </div>
      </div>
    </app-header-layout>
  </template>
  <script>
    Polymer({
      is: 'my-account',
      properties: {
        account: {
          type: Object,
          observer: 'accountChanged'
        },
      },

      accountChanged(){
        this.firstname = this.account[0].name.firstname;
        this.middlename = this.account[0].name.middlename;
        this.lastname = this.account[0].name.lastname;
        this.suffix = this.account[0].name.suffix;
        console.log(account);
      },

      toggleDrawer() {
        this.dispatchEvent(new CustomEvent('toggleDrawer', {
          bubbles: true, composed: true, detail: {
            narrow: this.$.narrow
          }
        }));
        this.$.narrow = !this.$.narrow;
      },
    })


  </script>
</dom-module>